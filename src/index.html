<html>
<head>
  <link rel="stylesheet" href="styleup.css">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/@metamask/legacy-web3@latest/dist/metamask.web3.min.js"></script>
    <!-- Or: -->
    <script src="https://unpkg.com/@metamask/legacy-web3@latest/dist/metamask.web3.js"></script><link href="https://fonts.googleapis.com/css2?family=Lato:wght@400&display=swap" rel="stylesheet">
  <style>
.dropbtn {
  background-color: #03a9f4;
  color: white;
  padding: 10px;
  font-size: 14px;
  border: none;
  cursor: pointer;
}
option {
	background-color: #000;
	color: #fff;
}
</style>
  </head>
  <body>
    <div class="color-white">
      <p id='account'></p>
    </div>
<div class="box">
  <h2>SafeMedBChain</h2>
  <br>
  <form onSubmit="App1.login(); return false;">
    <br>
    <div class="inputBox" style="color:white">
    	User Type
				<select  class="dropbtn" id="type" name="type" style="margin-left: 53px;" required>
					<option disabled selected value> ---- Select User Type ---- </option>
					<option value="manufacturer">Manufacturer</option>
					<option value="seller">Seller</option>
					<option value="admin">Admin</option>
				</select>
    </div>
	  <br>
      <div class="inputBox">
        <input type="text" name="username" id="username" required onkeyup="this.setAttribute('value', this.value);" required value="">
        <label>Username</label>
      </div> 
    <div class="inputBox">
        <input type="password" name="password" id="password" required value=""
               onkeyup="this.setAttribute('value', this.value);">
        <label>Password</label>
      </div>
      <p style="color:white;display:inline-block">New User?</p>
      <a style="color:#03a9f4;text-decoration:none" href="Register.html">Register</a>
      <div class="align-center">
      <br>
      <input type="submit" name="login" value="Login">
    </div>
    </form>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="vendor/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="vendor/truffle-contract/dist/truffle-contract.js"></script>
    <script src="app.js"></script>
    <script>
      App1={
        login: async()=>{
          const usertype=$('#type').val()
          const username=$('#username').val()
          const password=$('#password').val()
          var type;
          if(usertype=="manufacturer"){
            type=1
          }
          else if(usertype=="seller"){
            type=2
          }
          else if(usertype=="admin"){
            type=3
          }
          const value = await App.DrugCounterfiet.login(username,type,password)
          console.log(value)
          if(value == true && usertype == "manufacturer"){
            window.location.href="Add_Seller.html"
          }
          else if(value == true && usertype == "seller"){
            window.location.href="Add_Seller.html"
          }
          else if(value == true && usertype == "admin"){
            window.location.href="Add_Manufacturer.html"
          }
          else {
            alert("Incorrect Details")
            window.location.reload()
          }
        },
      }
    </script>
</body>
</html>